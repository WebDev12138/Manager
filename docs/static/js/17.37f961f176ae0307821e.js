webpackJsonp([17],{"yG+c":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),l=a.n(i),s=a("woOf"),n=a.n(s),o=a("zL8q"),r=a("mtWM"),c=a.n(r),h={inject:["reload"],data:function(){return{tableList:[],all:[],listLoading:!0,isShowEditVisible:!1,deleteVisible:!1,temp:{partition_name:"",id:"",video_title:"",video_describe:"",author:"",created_date:"",comments:"",watches:"",collections:""},total:0,page:1,pageSize:5,status:[{statusId:1,label:"启用"},{statusId:0,label:"禁用"}],value:"",searchName:"",filterTableDataEnd:[]}},created:function(){this.fetchData(),this.getAllData()},filters:{statusFilter:function(t){return{1:"success",2:"danger"}[t]}},methods:{search:function(){""===this.searchName?(this.filterTableDataEnd=[],this.fetchData()):this.doFilter()},fetchData:function(){var t=this;this.listLoading=!0,c.a.get("http://118.31.102.1:9200/recover/deleteVideo?pageNum="+this.page+"&pageSize="+this.pageSize).then(function(e){console.log(e.data),t.total=e.data.total,t.tableList=e.data.list,t.listLoading=!1}).catch(function(e){o.Message.error(e.response.data.message),t.listLoading=!1})},getAllData:function(){var t=this;c.a.get("http://118.31.102.1:9200/recover/getAll").then(function(e){t.all=e.data}).catch(function(t){o.Message.error(t.response.data.message)})},doFilter:function(){var t=this;this.filterTableDataEnd=[],""!==this.searchName?(this.all.forEach(function(e,a){e.partition_name&&e.partition_name.indexOf(t.searchName)>=0&&t.filterTableDataEnd.push(e),e.video_title&&e.video_title.indexOf(t.searchName)>=0&&t.filterTableDataEnd.push(e),e.video_describe&&e.video_describe.indexOf(t.searchName)>=0&&t.filterTableDataEnd.push(e),e.author&&e.author.indexOf(t.searchName)>=0&&t.filterTableDataEnd.push(e)}),this.total=this.filterTableDataEnd.length,this.currentChangePage(this.filterTableDataEnd)):this.fetchData()},clickfun:function(t){console.log(t.target.innerText)},recover:function(t){var e=this;this.temp=n()({},t),console.log(t),c.a.post("http://118.31.102.1:9200/recover/",{video_id:t.id}).then(function(){e.$notify({title:"成功",message:"视频恢复成功",type:"success",duration:2e3}),e.reload()}).catch(function(t){o.Message.error(t.response.data.message),e.deleteVisible=!1})},deleteUpdate:function(t){console.log(t),this.deleteVisible=!0,this.temp=n()({},t)},submitDelete:function(){var t=n()({},this.temp);console.log(t),console.log(this.tableList);var e=!0,a=!1,i=void 0;try{for(var s,o=l()(this.tableList);!(e=(s=o.next()).done);e=!0){var r=s.value;if(r.uid===this.temp.uid){var c=this.tableList.indexOf(r);this.tableList.splice(c,1),this.fetchData(),console.log(this.tableList);break}}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.deleteVisible=!1,this.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})},handleModifyStatus:function(t,e){this.$message({message:"操作成功",type:"success"}),console.log(t),t.status=e},updateData:function(){},handleSizeChange:function(t){this.page=t,console.log(this.page),this.fetchData()},handleCurrentChange:function(t){this.page=t,console.log(this.page),this.filterTableDataEnd.length<=0?this.fetchData():this.currentChangePage(this.filterTableDataEnd)},currentChangePage:function(t){var e=(this.page-1)*this.pageSize,a=this.page*this.pageSize;for(this.tableList=[];e<a;e++)t[e]&&this.tableList.push(t[e])}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"分区名,视频标题,视频描述,作者",clearable:""},on:{change:t.search},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.doFilter()}}},[a("i",{staticClass:"el-icon-search"}),t._v("搜索")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableList,border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"partition_name",label:"分区名","min-width":"65"}}),t._v(" "),a("el-table-column",{attrs:{prop:"video_title",label:"视频标题","min-width":"150px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"video_describe","min-width":"150px",label:"视频描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者","min-width":"65"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_date",label:"创建时间","min-width":"110px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"comments",label:"点赞数","min-width":"110px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"watches",label:"观看数","min-width":"110px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"collections",label:"收藏数","min-width":"110px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作 "},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.recover(e.row)}}},[t._v("恢复")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{layout:"total, prev, pager, next",background:"","page-size":5,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]},u=a("VU/8")(h,d,!1,null,null,null);e.default=u.exports}});