webpackJsonp([18],{S4wR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),s=a.n(i),l=a("woOf"),n=a.n(l),o=a("OVQD"),r=a("zL8q"),c=a("mtWM"),h=a.n(c),d={data:function(){return{tableList:[],all:[],listLoading:!0,isShowEditVisible:!1,deleteVisible:!1,temp:{id:"",video_id:"",created_by:"",created_date:""},total:0,page:1,pageSize:5,status:[{statusId:1,label:"启用"},{statusId:0,label:"禁用"}],value:"",searchName:"",filterTableDataEnd:[]}},created:function(){this.fetchData(),this.getAllData()},filters:{statusFilter:function(t){return{1:"success",2:"danger"}[t]}},methods:{search:function(){""===this.searchName?(this.filterTableDataEnd=[],this.fetchData()):this.doFilter()},fetchData:function(){var t=this;this.listLoading=!0,h.a.post("http://118.31.102.1:9200/passLog/videoPassLog",{pageNum:this.page,pageSize:this.pageSize}).then(function(e){t.total=e.data.total,t.tableList=e.data.list,t.listLoading=!1}).catch(function(e){r.Message.error(e.response.data.message),t.listLoading=!1})},getAllData:function(){var t=this;h.a.get("http://118.31.102.1:9200/passLog/getAllVideo").then(function(e){t.all=e.data}).catch(function(t){r.Message.error(t.response.data.message)})},doFilter:function(){var t=this;this.filterTableDataEnd=[],""!==this.searchName?(this.all.forEach(function(e,a){e.video_id&&e.video_id.indexOf(t.searchName)>=0&&t.filterTableDataEnd.push(e),e.created_by&&e.created_by.indexOf(t.searchName)>=0&&t.filterTableDataEnd.push(e)}),this.total=this.filterTableDataEnd.length,this.currentChangePage(this.filterTableDataEnd)):this.fetchData()},clickfun:function(t){console.log(t.target.innerText)},handleUpdate:function(t){this.isShowEditVisible=!0,this.temp=n()({},t),console.log(t)},deleteUpdate:function(t){console.log(t),this.deleteVisible=!0,this.temp=n()({},t)},submitDelete:function(){var t=n()({},this.temp);console.log(t),console.log(this.tableList);var e=!0,a=!1,i=void 0;try{for(var l,o=s()(this.tableList);!(e=(l=o.next()).done);e=!0){var r=l.value;if(r.uid===this.temp.uid){var c=this.tableList.indexOf(r);this.tableList.splice(c,1),this.fetchData(),console.log(this.tableList);break}}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.deleteVisible=!1,this.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})},handleModifyStatus:function(t,e){this.$message({message:"操作成功",type:"success"}),console.log(t),t.status=e},updateData:function(){var t=this,e=n()({},this.temp);console.log(e),Object(o.c)(e).then(function(){var e=!0,a=!1,i=void 0;try{for(var l,n=s()(t.tableList);!(e=(l=n.next()).done);e=!0){var o=l.value;if(o.uid===t.temp.uid){var r=t.tableList.indexOf(o);t.tableList.splice(r,1,t.temp);break}}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}t.isShowEditVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})},handleSizeChange:function(t){this.page=t,console.log(this.page),this.fetchData()},handleCurrentChange:function(t){this.page=t,console.log(this.page),this.filterTableDataEnd.length<=0?this.fetchData():this.currentChangePage(this.filterTableDataEnd)},currentChangePage:function(t){var e=(this.page-1)*this.pageSize,a=this.page*this.pageSize;for(this.tableList=[];e<a;e++)t[e]&&this.tableList.push(t[e])}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"视频ID,审核人",clearable:""},on:{change:t.search},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.doFilter()}}},[a("i",{staticClass:"el-icon-search"}),t._v("搜索")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableList,border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"video_id","min-width":"200px",label:"视频ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_by","min-width":"100px",label:"审核人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_date",label:"审核时间",width:"200px"}})],1),t._v(" "),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{layout:"total, prev, pager, next",background:"","page-size":5,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]},g=a("VU/8")(d,u,!1,null,null,null);e.default=g.exports}});